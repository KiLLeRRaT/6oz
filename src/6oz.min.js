!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.log=t()}(this,function(){"use strict";function r(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function s(e,t){for(var n=0;n<c.length;n++){var o=c[n];this[o]=n<e?a:this.methodFactory(o,e,t)}}function u(e,t,n){return o=e,typeof console!==p&&(void 0!==console[o]?r(console,o):void 0!==console.log?r(console,"log"):a)||function(e,t,n){return function(){typeof console!==p&&(s.call(this,t,n),this[e].apply(this,arguments))}}.apply(this,arguments);var o}function n(n,e,t){function o(){var e;try{e=window.localStorage[i]}catch(e){}if(typeof e===p)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(i)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}var r,a=this,i="loglevel";n&&(i+=":"+n),a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=t||u,a.getLevel=function(){return r},a.setLevel=function(e,t){if("string"==typeof e&&void 0!==a.levels[e.toUpperCase()]&&(e=a.levels[e.toUpperCase()]),!("number"==typeof e&&0<=e&&e<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;return r=e,!1!==t&&function(e){var t=(c[e]||"silent").toUpperCase();try{return window.localStorage[i]=t}catch(e){}try{window.document.cookie=encodeURIComponent(i)+"="+t+";"}catch(e){}}(e),s.call(a,e,n),typeof console===p&&e<a.levels.SILENT?"No console available for logging":void 0},a.setDefaultLevel=function(e){o()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var l=o();null==l&&(l=null==e?"WARN":e),a.setLevel(l,!1)}var a=function(){},p="undefined",c=["trace","debug","info","warn","error"],o=new n,i={};o.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t=t||(i[e]=new n(e,o.getLevel(),o.methodFactory))};var e=typeof window!==p?window.log:void 0;return o.noConflict=function(){return typeof window!==p&&window.log===o&&(window.log=e),o},o});var __escapeHTML=function(e){return e?("string"!=typeof e&&(e=e.toString()),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")):""},__unescapeHTML=function(e){return e?("string"!=typeof e&&(e=e.toString()),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")):""};!function(){"use strict";var I,L,D,S,O,r,a,m=(I=/[\s\n]/,L=/[\s\n]/g,D=/<\/?(?:[A-Za-z]+\w*)|<!--/,S=/(?:(?:&(?:amp|gt|lt|nbsp|quot|apos|#39);)|'|"|\\|\n)/g,O={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"&apos;":"\\'","&#39;":"\\'","'":"\\'","\\":"\\\\",'"':'\\"',"\n":"\\n"},function(e){for(var t=e.length,n=[],o=0;o<t;){var r=e[o];if("<"===r)if(o++,"!--"===e.substring(o,o+3)){o+=3;var a=e.indexOf("--\x3e",o);o=-1===a?t:a+3}else{var i={type:"Tag",value:""},l="",s={},u=!1,p=!1;for("/"===(r=e[o])&&(r=e[++o],u=!0);o<t&&">"!==r&&"/"!==r&&!1===I.test(r);)l+=r,r=e[++o];for(;o<t&&">"!==r&&("/"!==r||">"!==e[o+1]);)if(!0===I.test(r))r=e[++o];else{for(var c="",f="";o<t&&"="!==r&&!1===I.test(r)&&">"!==r&&("/"!==r||">"!==e[o+1]);)c+=r,r=e[++o];if("="===r){var g=" ",v=!1,d=0;for('"'!==(r=e[++o])&&"'"!==r&&" "!==r&&"\n"!==r&&"{"!==r||(g=(v="{"===r)?"}":r,r=e[++o]),v&&(f+="{");o<t&&">"!==r&&("/"!==r||">"!==e[o+1]);){if((!v||v&&d<=0)&&r===g){v&&(f+="}"),r=e[++o];break}f+=r,"{"===r?d++:"}"===r&&d--,r=e[++o]}}var m={name:c,value:__unescapeHTML(f),argument:void 0,data:{}},h=c.split(":");2===h.length&&(m.name=h[0],m.argument=h[1]),s[c]=m}"/"===r?(o+=2,p=!0):o++,i.value=l,i.attributes=s,i.closeStart=u,i.closeEnd=p,n.push(i)}else{var y,w=e.substring(o),b=w.search(D);-1===b?(y=w,o=t):(y=w.substring(0,b),o+=b),0!==y.replace(L,"").length&&n.push({type:"Text",value:y.replace(S,function(e){return O[e]})})}}return n}),h=(r={},a={start:"<%",end:"%>"},function e(t,n){var o=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};obj = obj || {};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").replace(new RegExp("'(?=[^"+a.end.substr(0,1)+"]*"+a.end+")","g"),"\t").split("'").join("\\'").replace(new RegExp("={(.+?(}+)?)}","g"),"=',__6oz.registerData($1),'").split("\t").join("'").replace(new RegExp(a.start+":(.+?)"+a.end,"g"),"',__escapeHTML($1),'").replace(new RegExp(a.start+"=(.+?)"+a.end,"g"),"',$1,'").split(a.start).join("');").split(a.end).join("p.push('")+"');}return p.join('');"):r[t]=r[t]||e(document.getElementById(t).innerHTML);return n?o(n):o}),y=/^on[a-z]+$/i,w=/^props$/i,b="__data",T=">>[6oz.js] ",e={},C=log.getLogger("6oz logger"),E={},_={},x={};function N(e,t,n){for(var o,r=[],a=0,i=!1,l=0,s=e.length;l<s;l++){var u,p=e[l],c=p.type,f=p.value,g=(o=f)&&-1<o.indexOf("-"),v=p.attributes&&p.attributes["skip-node"]&&"true"==p.attributes["skip-node"].value,d=function(e,t,n){var o=j(e,t,n);return o.elementKeyID=null==o.elementKeyID?"null":JSON.stringify(o.elementKeyID),o};if("ComponentStart"==c)x[p.attributes.componentID]=t,r.push("(function (o) {");else if("ComponentEnd"==c)r.push("})("+b+'["'+p.attributes.componentID+'"]);');else if("Tag"==c)if(p.closeStart||!v||i)if(p.closeStart&&!g)0==a--&&(i=!1),i||r.push('IncrementalDOM.elementClose("'+f+'");');else if(g&&!i){var m=M(p);if(!1===m)continue;r=r.concat(m)}else g||(a++,i||(u=d(p,t,n),r.push("IncrementalDOM."+u.elementType+'("'+f+'",'+u.elementKeyID+",null"+u.tagAttributesString+");")));else u=d(p,t,n),r.push("IncrementalDOM."+u.elementType+'("'+f+'",'+u.elementKeyID+",null"+u.tagAttributesString+");"),r.push("IncrementalDOM.skip();"),i=!0,a=0;else"Text"!=c||i||r.push('IncrementalDOM.text("'+f.replace(/(?:\r\n|\r|\n)/g,"")+'");')}return r}function j(e,t,n){if(!e)return!1;function o(e,t){if(-1==t.indexOf("."))return e[t];for(var n=t.split("."),o=e,r=!0,a=0,i=n.length;a<i;a++){var l=o[n[a]];if(!l){r=!1;break}o=l}return r?o:void 0}var r=e.attributes,a=[],i=e.closeEnd?"elementVoid":"elementOpen",l=null;if(0<Object.keys(r).length)for(var s in r){var u=r[s],p=u.name,c=u.value.replace(/(?:\r\n|\r|\n)/g,""),f=y.test(p),g=w.test(p);if("key-id"!=p.toLowerCase())if(a.push(JSON.stringify(u.name)),f)"function"==typeof o(t,c)?a.push(n+"."+c):(C.warn(T+"Could not find the function "+c+" so event was not bound."),a.pop());else if(g){x.attributeProps||(x.attributeProps={});var v=JSON.stringify(u.value),d=/\{([a-zA-Z0-9\-]+)\}/.exec(c);d&&1<d.length&&(d=d[1],x.attributeProps[d]=_[d],v=b+".attributeProps['"+d+"']"),a.push(v)}else a.push(JSON.stringify(c));else l=JSON.stringify(c)}return{elementType:i,tagAttributesString:0<a.length?","+a.join(","):"",elementKeyID:l}}function M(e){var t=e.value.toLowerCase(),n=E[t];if(!n)return!1;var o,r,a=e.attributes,i={};for(var l in a){var s=a[l].value,u=(o=s)&&/^\{(.*)\}$/.exec(o);if(u&&1<u.length&&u[1]){var p=u[1];_[p]?i[l]=_[p]:i[l]=void 0}else i[l]=s}var c={props:i};void 0!==n.controller&&(r=new n.controller(i),c.controller=r);var f=h(n.template,c),g=m(f),v=A();for(var d in g.unshift({type:"ComponentStart",attributes:{componentID:v}}),g.push({type:"ComponentEnd",attributes:{componentID:v}}),i.props={},i)i.props[d]=i[d];return void 0!==r&&(i.controller=r),N(g,i,"o")}function A(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}e.applyToDOM=function t(n,o,e){var r=h(o,e.data),a=N(m(r),e.functions,b+".__fn"),i=new Function(b,a.join(""));return x.__fn=e.functions,IncrementalDOM.patch(n,i,x),_={},x={},{update:function(e){t(n,o,e)}}},e.addComponent=function(e){if(!(e=e||{}).componentName||!e.template)return C.warn(T+"You must provide a componentName and template."),!1;var t,n=e.componentName.toLowerCase(),o=e.controller;if(/-[a-zA-Z0-9]+[^-]?$/.test(n)){if(!E[n])return void 0!==o&&"function"==typeof o&&(t=o),E[n]={template:e.template,controller:t},!0;C.warn(T+"A component with name "+n+" has already been added.")}else C.warn(T+"You must provide a valid component name ["+n+"].  It must be kebab case, must contain at least one hyphen, and must not end with a hyphen.")},e.registerData=function(e){var t=A();return _[t]=e,"{"+t+"}"},window.__6oz=e,IncrementalDOM.attributes.props=function(e,t,n){e[t]=n}}();