!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.log=t()}(this,function(){"use strict";function r(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function u(e,t){for(var n=0;n<c.length;n++){var o=c[n];this[o]=n<e?a:this.methodFactory(o,e,t)}}function s(e,t,n){return o=e,typeof console!==p&&(void 0!==console[o]?r(console,o):void 0!==console.log?r(console,"log"):a)||function(e,t,n){return function(){typeof console!==p&&(u.call(this,t,n),this[e].apply(this,arguments))}}.apply(this,arguments);var o}function n(n,e,t){function o(){var e;try{e=window.localStorage[l]}catch(e){}if(typeof e===p)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(l)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}var r,a=this,l="loglevel";n&&(l+=":"+n),a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=t||s,a.getLevel=function(){return r},a.setLevel=function(e,t){if("string"==typeof e&&void 0!==a.levels[e.toUpperCase()]&&(e=a.levels[e.toUpperCase()]),!("number"==typeof e&&0<=e&&e<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;return r=e,!1!==t&&function(e){var t=(c[e]||"silent").toUpperCase();try{return window.localStorage[l]=t}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+t+";"}catch(e){}}(e),u.call(a,e,n),typeof console===p&&e<a.levels.SILENT?"No console available for logging":void 0},a.setDefaultLevel=function(e){o()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var i=o();null==i&&(i=null==e?"WARN":e),a.setLevel(i,!1)}var a=function(){},p="undefined",c=["trace","debug","info","warn","error"],o=new n,l={};o.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=l[e];return t||(t=l[e]=new n(e,o.getLevel(),o.methodFactory)),t};var e=typeof window!==p?window.log:void 0;return o.noConflict=function(){return typeof window!==p&&window.log===o&&(window.log=e),o},o});var __escapeHTML=function(e){return e?("string"!=typeof e&&(e=e.toString()),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")):""},__unescapeHTML=function(e){return e?("string"!=typeof e&&(e=e.toString()),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")):""};!function(){"use strict";var L,D,T,C,E,r,a,m=(L=/[\s\n]/,D=/[\s\n]/g,T=/<\/?(?:[A-Za-z]+\w*)|<!--/,C=/(?:(?:&(?:amp|gt|lt|nbsp|quot|apos|#39);)|'|"|\\|\n)/g,E={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"&apos;":"\\'","&#39;":"\\'","'":"\\'","\\":"\\\\",'"':'\\"',"\n":"\\n"},function(e){for(var t,n=e.length,o=[],r=0;r<n;){var a=e[r];if("<"===a)if(r++,"!--"===e.substring(r,r+3)){r+=3;var l=e.indexOf("--\x3e",r);r=-1===l?n:l+3}else{var i={type:"Tag",value:""},u="",s={},p=!1,c=!1;for("/"===(a=e[r])&&(a=e[++r],p=!0);r<n&&">"!==a&&"/"!==a&&!1===L.test(a);)u+=a,a=e[++r];for(;r<n&&">"!==a&&("/"!==a||">"!==e[r+1]);)if(!0===L.test(a))a=e[++r];else{for(var f="",v="";r<n&&"="!==a&&!1===L.test(a)&&">"!==a&&("/"!==a||">"!==e[r+1]);)f+=a,a=e[++r];if("="===a){var g=" ",d=!1,m=0;for('"'!==(a=e[++r])&&"'"!==a&&" "!==a&&"\n"!==a&&"{"!==a||(g=(d="{"===a)?"}":a,a=e[++r]),d&&(v+="{");r<n&&">"!==a&&("/"!==a||">"!==e[r+1]);){if((!d||d&&m<=0)&&a===g){d&&(v+="}"),a=e[++r];break}v+=a,"{"===a?m++:"}"===a&&m--,a=e[++r]}}var h={name:f,value:__unescapeHTML(v),argument:void 0,data:{}},y=f.split(":");2===y.length&&(h.name=y[0],h.argument=y[1]),s[f]=h}"/"===a?(r+=2,c=!0):r++,i.value=u,i.attributes=s,i.closeStart=p,i.closeEnd=c,o.push(i)}else{var w,b=e.substring(r),I=b.search(T);-1===I?(w=b,r=n):(w=b.substring(0,I),r+=I),0!==(t=w,t.replace(D,"")).length&&o.push({type:"Text",value:w.replace(C,function(e){return E[e]})})}}return o}),h=(r={},a={start:"<%",end:"%>"},function e(t,n){var o=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};obj = obj || {};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").replace(new RegExp("'(?=[^"+a.end.substr(0,1)+"]*"+a.end+")","g"),"\t").split("'").join("\\'").replace(new RegExp("={(.+?(}+)?)}","g"),"=',__6oz.registerData($1),'").split("\t").join("'").replace(new RegExp(a.start+":(.+?)"+a.end,"g"),"',__escapeHTML($1),'").replace(new RegExp(a.start+"=(.+?)"+a.end,"g"),"',$1,'").split(a.start).join("');").split(a.end).join("p.push('")+"');}return p.join('');"):r[t]=r[t]||e(document.getElementById(t).innerHTML);return n?o(n):o}),y=/^on[a-z]+$/i,w=/^props$/i,b="__data",I=">>[6oz.js] ",e={},_=log.getLogger("6oz logger"),x={},S={},O={};function j(e,t,n){for(var o,r=[],a=0,l=!1,i=0,u=e.length;i<u;i++){var s,p=e[i],c=p.type,f=p.value,v=(o=f)&&-1<o.indexOf("-"),g=p.attributes&&p.attributes["skip-node"]&&"true"==p.attributes["skip-node"].value,d=function(e,t,n){var o=M(e,t,n);return o.elementKeyID=null==o.elementKeyID?"null":'"'+o.elementKeyID+'"',o};if("ComponentStart"==c)O[p.attributes.componentID]=t,r.push("(function (o) {");else if("ComponentEnd"==c)r.push("})("+b+'["'+p.attributes.componentID+'"]);');else if("Tag"==c)if(p.closeStart||!g||l)if(p.closeStart&&!v)0==a--&&(l=!1),l||r.push('IncrementalDOM.elementClose("'+f+'");');else if(v&&!l){var m=A(p);if(!1===m)continue;r=r.concat(m)}else v||(a++,l||(s=d(p,t,n),r.push("IncrementalDOM."+s.elementType+'("'+f+'",'+s.elementKeyID+",null"+s.tagAttributesString+");")));else s=d(p,t,n),r.push("IncrementalDOM."+s.elementType+'("'+f+'",'+s.elementKeyID+",null"+s.tagAttributesString+");"),r.push("IncrementalDOM.skip();"),l=!0,a=0;else"Text"!=c||l||r.push('IncrementalDOM.text("'+f.replace(/(?:\r\n|\r|\n)/g,"")+'");')}return r}function M(e,t,n){if(!e)return!1;var o=e.attributes,r=[],a=e.closeEnd?"elementVoid":"elementOpen",l=null,i=function(e,t){if(-1==t.indexOf("."))return e[t];for(var n=t.split("."),o=e,r=!0,a=0,l=n.length;a<l;a++){var i=o[n[a]];if(!i){r=!1;break}o=i}return r?o:void 0};if(0<Object.keys(o).length)for(var u in o){var s=o[u],p=s.name,c=s.value.replace(/(?:\r\n|\r|\n)/g,""),f=y.test(p),v=w.test(p);if("key-id"!=p.toLowerCase())if(r.push('"'+s.name+'"'),f)"function"==typeof i(t,c)?r.push(n+"."+c):(_.warn(I+"Could not find the function "+c+" so event was not bound."),r.pop());else if(v){O.attributeProps||(O.attributeProps={});var g='"'+s.value+'"',d=/\{([a-zA-Z0-9\-]+)\}/.exec(c);d&&1<d.length&&(d=d[1],O.attributeProps[d]=S[d],g=b+".attributeProps['"+d+"']"),r.push(g)}else r.push('"'+c.replace(/"/g,'\\"')+'"');else l=c}return{elementType:a,tagAttributesString:0<r.length?","+r.join(","):"",elementKeyID:l}}function A(e){var t=e.value.toLowerCase(),n=x[t];if(!n)return!1;var o,r,a=e.attributes,l={};for(var i in a){var u=a[i].value,s=(o=u)&&/^\{(.*)\}$/.exec(o);if(s&&1<s.length&&s[1]){var p=s[1];S[p]?l[i]=S[p]:l[i]=void 0}else l[i]=u}var c={props:l};void 0!==n.controller&&(r=new n.controller(l),c.controller=r);var f=h(n.template,c),v=m(f),g=R();for(var d in v.unshift({type:"ComponentStart",attributes:{componentID:g}}),v.push({type:"ComponentEnd",attributes:{componentID:g}}),l.props={},l)l.props[d]=l[d];return void 0!==r&&(l.controller=r),j(v,l,"o")}function R(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}e.applyToDOM=function t(n,o,e){var r=h(o,e.data),a=j(m(r),e.functions,b+".__fn"),l=new Function(b,a.join(""));return O.__fn=e.functions,IncrementalDOM.patch(n,l,O),S={},O={},{update:function(e){t(n,o,e)}}},e.addComponent=function(e){if(!(e=e||{}).componentName||!e.template)return _.warn(I+"You must provide a componentName and template."),!1;var t,n=e.componentName.toLowerCase(),o=e.controller;if(/-[a-zA-Z0-9]+[^-]?$/.test(n)){if(!x[n])return void 0!==o&&"function"==typeof o&&(t=o),x[n]={template:e.template,controller:t},!0;_.warn(I+"A component with name "+n+" has already been added.")}else _.warn(I+"You must provide a valid component name ["+n+"].  It must be kebab case, must contain at least one hyphen, and must not end with a hyphen.")},e.registerData=function(e){var t=R();return S[t]=e,"{"+t+"}"},window.__6oz=e,IncrementalDOM.attributes.props=function(e,t,n){e[t]=n}}();